<svg baseProfile="full" height="100%" version="1.1" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"><![CDATA[
svg {
  padding: 50px;
}
text.peer-label {
  font-weight: bold;
  font-size: x-large;
}
]]></style><marker id="id1" markerHeight="15" markerUnits="strokeWidth" markerWidth="15" orient="auto" refX="-2" refY="0" viewBox="-6 -6 12 12"><polygon points="-2,0 -5,5 5,0 -5,-5" /></marker><marker id="id2" /></defs><rect class="peer" fill="white" height="300" rx="8" ry="8" stroke="black" width="200" x="0" y="0" /><text class="peer-label" x="0" y="-15">Loader<title>After loading data into the relational database, new items are sent to the processor server for processing.</title></text><text class="peer-label" x="300" y="-15">UI<title>The UI requests processings via AJAX.</title></text><rect class="peer" fill="white" height="300" rx="8" ry="8" stroke="black" width="200" x="600" y="0" /><text class="peer-label" x="600" y="-15">Processor Server<title>The Processor Server is responsible for causing N different processing tasks to be done to each item.</title></text><rect class="peer" fill="white" height="300" rx="8" ry="8" stroke="black" width="200" x="900" y="0" /><text class="peer-label" x="900" y="-15">Redis<title>Redis acts as the celery message broker: the web server sends tasks to redis, and celery worker processes take tasks from redis.</title></text><text class="peer-label" x="1200" y="-15">Processor Worker<title>A celery worker consuming tasks for a single Processor.</title></text><text class="peer-label" x="1500" y="-15">DB<title>Relational database accessed by both the server and celery worker processes.</title></text><line class="message" marker-end="url(#id1)" marker-mid="url(#id2)" marker-start="url(#id2)" stroke="black" x1="100.0" x2="700.0" y1="50" y2="50" /><text class="message-label" x="250.0" y="42">items for processing</text><line class="message" marker-end="url(#id1)" marker-mid="url(#id2)" marker-start="url(#id2)" stroke="black" x1="700.0" x2="1000.0" y1="100" y2="100" /><text class="message-label" x="775.0" y="92">create processing task</text><line class="message" marker-end="url(#id1)" marker-mid="url(#id2)" marker-start="url(#id2)" stroke="black" x1="700.0" x2="1000.0" y1="150" y2="150" /><text class="message-label" x="775.0" y="142">create processing task</text><line class="message" marker-end="url(#id1)" marker-mid="url(#id2)" marker-start="url(#id2)" stroke="black" x1="700.0" x2="1000.0" y1="200" y2="200" /><text class="message-label" x="775.0" y="192">...</text><line class="message" marker-end="url(#id1)" marker-mid="url(#id2)" marker-start="url(#id2)" stroke="black" x1="700.0" x2="100.0" y1="250" y2="250" /><text class="message-label" x="250.0" y="242">ACK</text><rect class="peer" fill="white" height="200" rx="8" ry="8" stroke="black" width="200" x="900" y="325.0" /><rect class="peer" fill="white" height="200" rx="8" ry="8" stroke="black" width="200" x="1200" y="325.0" /><rect class="peer" fill="white" height="200" rx="8" ry="8" stroke="black" width="200" x="1500" y="325.0" /><line class="message" marker-end="url(#id1)" marker-mid="url(#id2)" marker-start="url(#id2)" stroke="black" x1="1300.0" x2="1000.0" y1="375.0" y2="375.0" /><text class="message-label" x="1075.0" y="367.0">request task</text><line class="message" marker-end="url(#id1)" marker-mid="url(#id2)" marker-start="url(#id2)" stroke="black" x1="1000.0" x2="1300.0" y1="425.0" y2="425.0" /><text class="message-label" x="1075.0" y="417.0">task</text><line class="message" marker-end="url(#id1)" marker-mid="url(#id2)" marker-start="url(#id2)" stroke="black" x1="1300.0" x2="1600.0" y1="475.0" y2="475.0" /><text class="message-label" x="1375.0" y="467.0">save completed task</text><rect class="peer" fill="white" height="250" rx="8" ry="8" stroke="black" width="200" x="300" y="550.0" /><rect class="peer" fill="white" height="250" rx="8" ry="8" stroke="black" width="200" x="600" y="550.0" /><rect class="peer" fill="white" height="250" rx="8" ry="8" stroke="black" width="200" x="1500" y="550.0" /><line class="message" marker-end="url(#id1)" marker-mid="url(#id2)" marker-start="url(#id2)" stroke="black" x1="400.0" x2="700.0" y1="600.0" y2="600.0" /><text class="message-label" x="475.0" y="592.0">request processing for item</text><line class="message" marker-end="url(#id1)" marker-mid="url(#id2)" marker-start="url(#id2)" stroke="black" x1="700.0" x2="1600.0" y1="650.0" y2="650.0" /><text class="message-label" x="925.0" y="642.0">request processing for item</text><line class="message" marker-end="url(#id1)" marker-mid="url(#id2)" marker-start="url(#id2)" stroke="black" x1="1600.0" x2="700.0" y1="700.0" y2="700.0" /><text class="message-label" x="925.0" y="692.0">processing for item</text><line class="message" marker-end="url(#id1)" marker-mid="url(#id2)" marker-start="url(#id2)" stroke="black" x1="700.0" x2="400.0" y1="750.0" y2="750.0" /><text class="message-label" x="475.0" y="742.0">processing for item</text></svg>
